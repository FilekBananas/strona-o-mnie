<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Not found</title>
    <meta name="robots" content="noindex" />
    <style>
      body {
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial,
          "Apple Color Emoji", "Segoe UI Emoji";
        margin: 0;
        padding: 40px 18px;
        background: #0b1020;
        color: rgba(255, 255, 255, 0.92);
      }
      .wrap {
        max-width: 740px;
        margin: 0 auto;
      }
      a {
        color: rgba(255, 255, 255, 0.92);
      }
      code {
        background: rgba(255, 255, 255, 0.08);
        padding: 2px 6px;
        border-radius: 8px;
      }
      .muted {
        color: rgba(255, 255, 255, 0.7);
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <h1>404</h1>
      <p class="muted" id="msg">Page not found.</p>
      <p class="muted">
        <a id="home" href="/">Go home</a>
      </p>
    </div>

    <script>
      (function () {
        const PREFIX = "filip-biskupski-site-";
        const STORAGE_FROM = PREFIX + "from";
        const STORAGE_FROM_MODE = PREFIX + "from-mode";

        const sanitizeFrom = (raw) => {
          const s = String(raw || "")
            .trim()
            .toLowerCase();
          if (!s) return "";
          return s
            .replace(/[^a-z0-9]+/g, "-")
            .replace(/^-+/, "")
            .replace(/-+$/, "")
            .slice(0, 40);
        };

        const pathname = String(window.location.pathname || "");
        const match = pathname.match(/^(.*\/)from\/([^\/?#]+)\/?$/i);

        if (match) {
          const base = match[1] || "/";
          let raw = "";
          try {
            raw = decodeURIComponent(match[2] || "");
          } catch {
            raw = String(match[2] || "");
          }
          const slug = sanitizeFrom(raw);
          if (slug) {
            try {
              window.sessionStorage.setItem(STORAGE_FROM, slug);
              window.sessionStorage.setItem(STORAGE_FROM_MODE, "path");
            } catch {
              // ignore
            }
          }
          const next = base + (window.location.search || "") + (window.location.hash || "");
          window.location.replace(next);
          return;
        }

        const host = String(window.location.hostname || "").toLowerCase();
        const parts = pathname.split("/").filter(Boolean);
        const base = host.endsWith("github.io") && parts.length ? `/${parts[0]}/` : "/";
        const home = document.getElementById("home");
        if (home) home.setAttribute("href", base);
      })();
    </script>
  </body>
</html>
